{
  "$id": "https://vda231-301.github.io/schemas/EN_10204/VDA_231-301_EN_10204_2004_Certificate_3.1_v0.2.0.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "allOf": [
    {
      "$ref": "https://vda231-301.github.io/schemas/generic/VDA_231-301_generic_v0.2.0.schema.json"
    },
    {
      "properties": {
        "TestSeries": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/3-1_Certificate.BranchingTestSeries"
          }
        }
      }
    }
  ],
  "$defs": {
    "3-1_Certificate_Composition.TestExecution": {
      "properties": {
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "const": "TestExecution"
        },
        "SingleResults": {
          "$ref": "#/$defs/3-1_Composition_Certificate.InformationSet"
        }
      },
      "required": [
        "_id",
        "_type",
        "SingleResults"
      ],
      "type": "object"
    },
    "3-1_Certificate_Tensile.TestExecution": {
      "properties": {
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "const": "TestExecution"
        },
        "SingleResults": {
          "type": "array",
          "minItems": 4,
          "maxItems": 4,
          "uniqueItems": true,
          "items": {
            "oneOf": [
              {
                "$ref": "#/$defs/3-1_Certificate.YieldStrength"
              },
              {
                "$ref": "#/$defs/3-1_Certificate.TensileStrength"
              },
              {
                "$ref": "#/$defs/3-1_Certificate.ElongationA50"
              },
              {
                "$ref": "#/$defs/3-1_Certificate.UniformElongation"
              }
            ]
          }
        }
      },
      "required": [
        "_id",
        "_type",
        "SingleResults"
      ],
      "type": "object"
    },
    "3-1_Certificate.TensileStrength": {
      "properties": {
        "Property": {
          "const": "Tensile Strength"
        },
        "Unit": {
          "const": "MPa"
        },
        "Symbol": {
          "const": "Rm"
        },
        "Value": {
          "description": "Tensile value with precision to 1 decimal places",
          "maximum": 2500,
          "minimum": 1,
          "multipleOf": 0.1,
          "type": "number"
        },
        "Rounding": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "RoundingAccuracy": {
          "type": "number"
        },
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "oneOf": [
            {
              "const": "ConsolidatedCharacteristicValue"
            },
            {
              "const": "SingleResultPoint"
            }
          ],
          "type": "string"
        },
        "Aggregation": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "Comment": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "CriterionType": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        }
      },
      "required": [
        "Property",
        "Value"
      ],
      "type": "object"
    },
    "3-1_Certificate.YieldStrength": {
      "properties": {
        "Property": {
          "const": "Yield Strength"
        },
        "Unit": {
          "const": "MPa"
        },
        "Symbol": {
          "oneOf": [
            {
              "const": "Rp0.2"
            },
            {
              "const": "ReL"
            },
            {
              "const": "ReH"
            }
          ]
        },
        "Value": {
          "description": "Yield strength (Rp0.2 or ReL/ReH)",
          "maximum": 2000,
          "minimum": 1,
          "multipleOf": 0.1,
          "type": "number"
        },
        "Rounding": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "RoundingAccuracy": {
          "type": "number"
        },
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "oneOf": [
            {
              "const": "ConsolidatedCharacteristicValue"
            },
            {
              "const": "SingleResultPoint"
            }
          ],
          "type": "string"
        },
        "Aggregation": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "Comment": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "CriterionType": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        }
      },
      "required": [
        "Property",
        "Value"
      ],
      "type": "object"
    },
    "3-1_Certificate.ElongationA50": {
      "properties": {
        "Property": {
          "const": "Elongation at Fracture"
        },
        "Unit": {
          "const": "%"
        },
        "Symbol": {
          "const": "A50"
        },
        "Value": {
          "description": "Elongation A50 generic regardless of type",
          "maximum": 100,
          "minimum": 0,
          "type": "number"
        },
        "Rounding": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "RoundingAccuracy": {
          "type": "number"
        },
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "oneOf": [
            {
              "const": "ConsolidatedCharacteristicValue"
            },
            {
              "const": "SingleResultPoint"
            }
          ],
          "type": "string"
        },
        "Aggregation": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "Comment": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "CriterionType": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        }
      },
      "required": [
        "Property",
        "Value"
      ],
      "type": "object"
    },
    "3-1_Certificate.UniformElongation": {
      "properties": {
        "Property": {
          "const": "Uniform Elongation"
        },
        "Unit": {
          "const": "%"
        },
        "Symbol": {
          "const": "Ag"
        },
        "Value": {
          "description": "Uniform Elongation",
          "maximum": 100,
          "minimum": 0,
          "type": "number"
        },
        "Rounding": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "RoundingAccuracy": {
          "type": "number"
        },
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "oneOf": [
            {
              "const": "ConsolidatedCharacteristicValue"
            },
            {
              "const": "SingleResultPoint"
            }
          ],
          "type": "string"
        },
        "Aggregation": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "Comment": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        },
        "CriterionType": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.RestrictedString"
        }
      },
      "required": [
        "Property",
        "Value"
      ],
      "type": "object"
    },
    "3-1_Certificate.ChangeOfWidth": {
      "properties": {
        "Property": {
          "const": "Change of Width"
        },
        "Unit": {
          "const": "mm"
        }
      },
      "required": [
        "Property",
        "Unit"
      ],
      "type": "object"
    },
    "3-1_Certificate.ChangeOfWidthValue": {
      "description": "Change of Width value in millimeters",
      "type": "number"
    },
    "3-1_Certificate.Displacement": {
      "properties": {
        "Property": {
          "const": "Displacement"
        },
        "Unit": {
          "const": "mm",
          "type": "string"
        }
      },
      "required": [
        "Property",
        "Unit"
      ],
      "type": "object"
    },
    "3-1_Certificate.DisplacementValue": {
      "description": "Displacement value in millimeters",
      "type": "number"
    },
    "3-1_Certificate.Force": {
      "properties": {
        "Property": {
          "const": "Force"
        },
        "Unit": {
          "const": "N"
        }
      },
      "required": [
        "Property",
        "Unit"
      ],
      "type": "object"
    },
    "3-1_Certificate.ForceValue": {
      "description": "Force value in Newtons",
      "type": "number"
    },
    "3-1_Certificate.Strain": {
      "properties": {
        "Property": {
          "const": "Strain"
        },
        "Unit": {
          "const": "Strain epsilon"
        },
        "Value": {
          "description": "Strain value with precision to 4 decimal places",
          "maximum": 0.1,
          "minimum": 0.001,
          "multipleOf": 0.0001,
          "type": "number"
        }
      },
      "required": [
        "Property",
        "Unit"
      ],
      "type": "object"
    },
    "3-1_Certificate.StrainValue": {
      "description": "Strain value with precision to 4 decimal places",
      "maximum": 1,
      "minimum": 0,
      "type": "number"
    },
    "3-1_Certificate.Stress": {
      "properties": {
        "Property": {
          "const": "Stress"
        },
        "Unit": {
          "const": "MPa"
        }
      },
      "required": [
        "Property",
        "Unit"
      ],
      "type": "object"
    },
    "3-1_Certificate.StressValue": {
      "description": "Stress value in MPa",
      "maximum": 2000,
      "minimum": 0,
      "type": "number"
    },
    "3-1_Certificate.Time": {
      "properties": {
        "Property": {
          "const": "Time"
        },
        "Unit": {
          "const": "s"
        }
      },
      "required": [
        "Property",
        "Unit"
      ],
      "type": "object"
    },
    "3-1_Certificate.TimeValue": {
      "description": "Time in seconds with precision to 2 decimal places",
      "maximum": 1000,
      "minimum": 0,
      "type": "number"
    },
    "3-1_Tensile_Certificate.ArraySpec": {
      "description": "Specification of array structure for tensile testing data.",
      "maxItems": 6,
      "minItems": 6,
      "prefixItems": [
        {
          "$ref": "#/$defs/3-1_Certificate.Strain"
        },
        {
          "$ref": "#/$defs/3-1_Certificate.Stress"
        },
        {
          "$ref": "#/$defs/3-1_Certificate.Time"
        },
        {
          "$ref": "#/$defs/3-1_Certificate.Force"
        },
        {
          "$ref": "#/$defs/3-1_Certificate.Displacement"
        },
        {
          "$ref": "#/$defs/3-1_Certificate.ChangeOfWidth"
        }
      ],
      "type": "object"
    },
    "3-1_Tensile_Certificate.ArrayValue": {
      "description": "Values corresponding to the tensile testing data.",
      "items": {
        "maxItems": 6,
        "minItems": 6,
        "prefixItems": [
          {
            "$ref": "#/$defs/3-1_Certificate.StrainValue"
          },
          {
            "$ref": "#/$defs/3-1_Certificate.StressValue"
          },
          {
            "$ref": "#/$defs/3-1_Certificate.TimeValue"
          },
          {
            "$ref": "#/$defs/3-1_Certificate.ForceValue"
          },
          {
            "$ref": "#/$defs/3-1_Certificate.DisplacementValue"
          },
          {
            "$ref": "#/$defs/3-1_Certificate.ChangeOfWidthValue"
          }
        ],
        "type": "array"
      },
      "maxItems": 80,
      "minItems": 1,
      "type": "array"
    },
    "3-1_Composition_Certificate.ArraySpec": {
      "description": "Specification of array structure for composition testing data.",
      "oneOf": [
        {
          "$ref": "#/$defs/3-1_Composition_Certificate.Substance"
        },
        {
          "$ref": "#/$defs/3-1_Composition_Certificate.SubstanceCAS"
        },
        {
          "$ref": "#/$defs/3-1_Composition_Certificate.Fraction"
        }
      ],
      "type": "object"
    },
    "3-1_Composition_Certificate.ArrayValue": {
      "description": "Values corresponding to the composition testing data.",
      "items": {
        "anyOf": [
          {
            "$ref": "#/$defs/3-1_Composition_Certificate.SubstanceValue"
          },
          {
            "$ref": "#/$defs/3-1_Composition_Certificate.SubstanceCASValue"
          },
          {
            "$ref": "#/$defs/3-1_Composition_Certificate.FractionValue"
          }
        ]
      },
      "maxItems": 3,
      "minItems": 3,
      "type": "array"
    },
    "3-1_Composition_Certificate.ArrayValueTargetValues": {
      "description": "Values corresponding to the composition testing data for target values.",
      "items": {
        "anyOf": [
          {
            "$ref": "#/$defs/3-1_Composition_Certificate.SubstanceValue"
          },
          {
            "$ref": "#/$defs/3-1_Composition_Certificate.SubstanceCASValue"
          },
          {
            "$ref": "#/$defs/3-1_Composition_Certificate.FractionValueTargetValues"
          }
        ]
      },
      "maxItems": 3,
      "minItems": 3,
      "type": "array"
    },
    "3-1_Composition_Certificate.Substance": {
      "properties": {
        "Property": {
          "const": "Substance"
        }
      },
      "required": [
        "Property"
      ],
      "type": "object"
    },
    "3-1_Composition_Certificate.SubstanceValue": {
      "description": "Substance Name",
      "type": "string",
      "enum": [
        "Si",
        "Mn",
        "P",
        "S",
        "Cr",
        "Mo",
        "Ni",
        "Cu",
        "Al",
        "Ti",
        "Nb",
        "V",
        "W",
        "Co",
        "B",
        "Y",
        "Zr",
        "Sn",
        "Sb",
        "Ce",
        "Hf",
        "Ta",
        "Pb",
        "Mg",
        "Ca",
        "Se",
        "O",
        "N",
        "H",
        "C"
      ]
    },
    "3-1_Composition_Certificate.SubstanceCAS": {
      "properties": {
        "Property": {
          "const": "Substance CAS"
        }
      },
      "required": [
        "Property"
      ],
      "type": "object"
    },
    "3-1_Composition_Certificate.SubstanceCASValue": {
      "description": "Substance CAS",
      "type": "string",
      "pattern": "^\\d{2,6}-\\d{2}-\\d$"
    },
    "3-1_Composition_Certificate.Fraction": {
      "properties": {
        "Property": {
          "const": "Fraction"
        },
        "Unit": {
          "const": "%"
        }
      },
      "required": [
        "Property",
        "Unit"
      ],
      "type": "object"
    },
    "3-1_Composition_Certificate.FractionValue": {
      "description": "Fraction value in percent with precision to 2 decimal places",
      "maximum": 100,
      "minimum": 0,
      "multipleOf": 0.0001,
      "type": "number"
    },
    "3-1_Composition_Certificate.FractionValueTargetValues": {
      "properties": {
        "maxValue": {
          "description": "Fraction value in percent with precision to 2 decimal places",
          "maximum": 100,
          "minimum": 0,
          "multipleOf": 0.0001,
          "type": "number"
        },
        "minValue": {
          "description": "Fraction value in percent with precision to 2 decimal places",
          "maximum": 100,
          "minimum": 0,
          "multipleOf": 0.0001,
          "type": "number"
        }
      },
      "required": [
        "maxValue",
        "minValue"
      ],
      "type": "object"
    },
    "3-1_Tensile_Certificate.InformationSet": {
      "additionalProperties": false,
      "anyOf": [
        {
          "required": [
            "Attributes"
          ]
        },
        {
          "required": [
            "ArraySpec",
            "ArrayValue"
          ]
        }
      ],
      "properties": {
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "const": "InformationSet"
        },
        "ArraySpec": {
          "items": {
            "$ref": "#/$defs/3-1_Tensile_Certificate.ArraySpec"
          },
          "minItems": 1,
          "type": "array"
        },
        "ArrayValue": {
          "items": {
            "$ref": "#/$defs/3-1_Tensile_Certificate.ArrayValue"
          },
          "minItems": 1,
          "type": "array"
        }
      },
      "type": "object"
    },
    "3-1_Tensile_Certificate.TestSeries": {
      "properties": {
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "const": "TestSeries"
        },
        "Executions": {
          "items": {
            "$ref": "#/$defs/3-1_Certificate_Tensile.TestExecution"
          },
          "type": "array"
        },
        "ConsolidatedCharacteristicValues": {
          "type": "array",
          "minItems": 4,
          "maxItems": 4,
          "uniqueItems": true,
          "items": {
            "oneOf": [
              {
                "$ref": "#/$defs/3-1_Certificate.YieldStrength"
              },
              {
                "$ref": "#/$defs/3-1_Certificate.TensileStrength"
              },
              {
                "$ref": "#/$defs/3-1_Certificate.ElongationA50"
              },
              {
                "$ref": "#/$defs/3-1_Certificate.UniformElongation"
              }
            ]
          }
        },
        "TargetCharacteristicValues": {
          "type": "array",
          "minItems": 4,
          "maxItems": 4,
          "uniqueItems": true,
          "items": {
            "oneOf": [
              {
                "$ref": "#/$defs/3-1_Certificate.YieldStrength"
              },
              {
                "$ref": "#/$defs/3-1_Certificate.TensileStrength"
              },
              {
                "$ref": "#/$defs/3-1_Certificate.ElongationA50"
              },
              {
                "$ref": "#/$defs/3-1_Certificate.UniformElongation"
              }
            ]
          }
        }
      },
      "required": [
        "_id",
        "_type",
        "Executions",
        "ConsolidatedCharacteristicValues"
      ],
      "type": "object"
    },
    "3-1_Composition_Certificate.TestSeries": {
      "properties": {
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "const": "TestSeries"
        },
        "Executions": {
          "items": {
            "$ref": "#/$defs/3-1_Certificate_Composition.TestExecution"
          },
          "type": "array"
        },
        "ConsolidatedCharacteristicValues": {
          "$ref": "#/$defs/3-1_Composition_Certificate.InformationSet"
        },
        "TargetCharacteristicValues": {
          "$ref": "#/$defs/3-1_Composition_Certificate.TargetValuesInformationSet"
        }
      },
      "required": [
        "_id",
        "_type",
        "Executions",
        "ConsolidatedCharacteristicValues"
      ],
      "type": "object"
    },
    "3-1_Composition_Certificate.InformationSet": {
      "properties": {
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "const": "InformationSet"
        },
        "ArraySpec": {
          "items": {
            "$ref": "#/$defs/3-1_Composition_Certificate.ArraySpec"
          },
          "minItems": 1,
          "type": "array"
        },
        "ArrayValue": {
          "items": {
            "$ref": "#/$defs/3-1_Composition_Certificate.ArrayValue"
          },
          "minItems": 1,
          "type": "array"
        }
      },
      "type": "object",
      "required": [
        "ArraySpec",
        "ArrayValue"
      ]
    },
    "3-1_Composition_Certificate.TargetValuesInformationSet": {
      "anyOf": [
        {
          "required": [
            "Attributes"
          ]
        },
        {
          "required": [
            "ArraySpec",
            "ArrayValue"
          ]
        }
      ],
      "properties": {
        "_id": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.Identifier"
        },
        "_type": {
          "const": "InformationSet"
        },
        "ArraySpec": {
          "items": {
            "$ref": "#/$defs/3-1_Composition_Certificate.ArraySpec"
          },
          "minItems": 1,
          "type": "array"
        },
        "ArrayValue": {
          "items": {
            "$ref": "#/$defs/3-1_Composition_Certificate.ArrayValueTargetValues"
          },
          "minItems": 1,
          "type": "array"
        }
      },
      "type": "object"
    },
    "3-1_Certificate.BranchingTestSeries": {
      "type": "object",
      "if": {
        "properties": {
          "TestType": {
            "const": "Optical Emission Spectroscopy"
          }
        }
      },
      "then": {
        "$ref": "#/$defs/3-1_Composition_Certificate.TestSeries"
      },
      "else": {
        "if": {
          "properties": {
            "TestType": {
              "const": "Tensile testing"
            }
          }
        },
        "then": {
          "$ref": "#/$defs/3-1_Tensile_Certificate.TestSeries"
        },
        "else": {
          "$ref": "../generic/VDA_231-301_generic_v0.2.0.schema.json#/$defs/Generic.TestSeries"
        }
      }
    }
  }
}